{"version":3,"file":"just-promise.js","sources":["../src/index.ts"],"sourcesContent":["const [PENDING, FULFILLED, REJECTED] = ['PENDING', 'FULFILLED', 'RESOLVED']\n\nexport default function Promise(executable: (resolve: (value: any) => void, reject: (value: any) => void) => void): void {\n    this.status = PENDING\n    this.value = null\n    this.resolves = []\n    this.rejects = []\n\n    const resolve = (value: any) => {\n        if (value instanceof Promise) {\n            return value.then(resolve, reject)\n        }\n        setTimeout(() => {\n            if (this.status === PENDING) {\n                this.value = value\n                this.status = FULFILLED\n                this.resolves.map((resolve: () => any) => resolve())\n            }\n        }, 0);\n    }\n\n    const reject = (value: any) => {\n        setTimeout(() => {\n            if (this.status === PENDING) {\n                this.value = value\n                this.status = REJECTED\n                this.rejects.map((reject: () => any) => reject())\n            }\n        }, 0);\n    }\n\n    try {\n        executable(resolve, reject)\n    } catch (error) {\n        console.log(2);\n        \n        reject(error)\n    }\n}\n\nPromise.prototype.then = function then(onfulfilled: (value: any) => any | null, onrejected: (value: any) => any): any {\n    onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : v => v\n    onrejected = typeof onrejected === 'function' ? onrejected : v => v\n\n    if (this.status === FULFILLED) onfulfilled(this.value)\n    if (this.status === REJECTED) onrejected(this.value)\n    if (this.status === PENDING) {\n        this.resolves.push(() => onfulfilled(this.value))\n        this.rejects.push(() => onrejected(this.value))\n    }\n\n    return this;\n}\n\nPromise.prototype.catch = function then(onrejected: (value: any) => any): any {\n    return this.then(null, onrejected)\n}"],"names":[],"mappings":";;;;;;IAAM,IAAA,yCAAqE,EAApE,eAAO,EAAE,iBAAS,EAAE,gBAAgD,CAAA;AAE3E,aAAwB,OAAO,CAAC,UAAiF;QAAjH,iBAoCC;QAnCG,IAAI,CAAC,MAAM,GAAG,OAAO,CAAA;QACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAA;QACjB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAA;QAClB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAA;QAEjB,IAAM,OAAO,GAAG,UAAC,KAAU;YACvB,IAAI,KAAK,YAAY,OAAO,EAAE;gBAC1B,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;aACrC;YACD,UAAU,CAAC;gBACP,IAAI,KAAI,CAAC,MAAM,KAAK,OAAO,EAAE;oBACzB,KAAI,CAAC,KAAK,GAAG,KAAK,CAAA;oBAClB,KAAI,CAAC,MAAM,GAAG,SAAS,CAAA;oBACvB,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAC,OAAkB,IAAK,OAAA,OAAO,EAAE,GAAA,CAAC,CAAA;iBACvD;aACJ,EAAE,CAAC,CAAC,CAAC;SACT,CAAA;QAED,IAAM,MAAM,GAAG,UAAC,KAAU;YACtB,UAAU,CAAC;gBACP,IAAI,KAAI,CAAC,MAAM,KAAK,OAAO,EAAE;oBACzB,KAAI,CAAC,KAAK,GAAG,KAAK,CAAA;oBAClB,KAAI,CAAC,MAAM,GAAG,QAAQ,CAAA;oBACtB,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAC,MAAiB,IAAK,OAAA,MAAM,EAAE,GAAA,CAAC,CAAA;iBACpD;aACJ,EAAE,CAAC,CAAC,CAAC;SACT,CAAA;QAED,IAAI;YACA,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;SAC9B;QAAC,OAAO,KAAK,EAAE;YACZ,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAEf,MAAM,CAAC,KAAK,CAAC,CAAA;SAChB;IACL,CAAC;IAED,OAAO,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,IAAI,CAAC,WAAuC,EAAE,UAA+B;QAAtF,iBAYxB;QAXG,WAAW,GAAG,OAAO,WAAW,KAAK,UAAU,GAAG,WAAW,GAAG,UAAA,CAAC,IAAI,OAAA,CAAC,GAAA,CAAA;QACtE,UAAU,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,UAAU,GAAG,UAAA,CAAC,IAAI,OAAA,CAAC,GAAA,CAAA;QAEnE,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS;YAAE,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,IAAI,CAAC,MAAM,KAAK,QAAQ;YAAE,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACpD,IAAI,IAAI,CAAC,MAAM,KAAK,OAAO,EAAE;YACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAM,OAAA,WAAW,CAAC,KAAI,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;YACjD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAM,OAAA,UAAU,CAAC,KAAI,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;SAClD;QAED,OAAO,IAAI,CAAC;IAChB,CAAC,CAAA;IAED,OAAO,CAAC,SAAS,CAAC,OAAK,CAAA,GAAG,SAAS,IAAI,CAAC,UAA+B;QACnE,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAA;IACtC,CAAC,CAAA;;;;;;;;"}