{"version":3,"file":"just-promise.es.js","sources":["../src/index.ts"],"sourcesContent":["const [PENDING, FULFILLED, REJECTED] = ['PENDING', 'FULFILLED', 'RESOLVED']\n\nexport default function Promise(executable: (resolve: (value: any) => void, reject: (value: any) => void) => void): void {\n    this.status = PENDING\n    this.value = null\n    this.resolves = []\n    this.rejects = []\n\n    const resolve = (value: any) => {\n        if (value instanceof Promise) {\n            return value.then(resolve, reject)\n        }\n        setTimeout(() => {\n            if (this.status === PENDING) {\n                this.value = value\n                this.status = FULFILLED\n                this.resolves.map((resolve: () => any) => resolve())\n            }\n        }, 0);\n    }\n\n    const reject = (value: any) => {\n        setTimeout(() => {\n            if (this.status === PENDING) {\n                this.value = value\n                this.status = REJECTED\n                this.rejects.map((reject: () => any) => reject())\n            }\n        }, 0);\n    }\n\n    try {\n        executable(resolve, reject)\n    } catch (error) {\n        console.log(2);\n        \n        reject(error)\n    }\n}\n\nPromise.prototype.then = function then(onfulfilled: (value: any) => any | null, onrejected: (value: any) => any): any {\n    onfulfilled = typeof onfulfilled === 'function' ? onfulfilled : v => v\n    onrejected = typeof onrejected === 'function' ? onrejected : v => v\n\n    if (this.status === FULFILLED) onfulfilled(this.value)\n    if (this.status === REJECTED) onrejected(this.value)\n    if (this.status === PENDING) {\n        this.resolves.push(() => onfulfilled(this.value))\n        this.rejects.push(() => onrejected(this.value))\n    }\n\n    return this;\n}\n\nPromise.prototype.catch = function then(onrejected: (value: any) => any): any {\n    return this.then(null, onrejected)\n}"],"names":[],"mappings":"AAAM,IAAA,yCAAqE,EAApE,eAAO,EAAE,iBAAS,EAAE,gBAAgD,CAAA;AAE3E,SAAwB,OAAO,CAAC,UAAiF;IAAjH,iBAoCC;IAnCG,IAAI,CAAC,MAAM,GAAG,OAAO,CAAA;IACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAA;IACjB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAA;IAClB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAA;IAEjB,IAAM,OAAO,GAAG,UAAC,KAAU;QACvB,IAAI,KAAK,YAAY,OAAO,EAAE;YAC1B,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;SACrC;QACD,UAAU,CAAC;YACP,IAAI,KAAI,CAAC,MAAM,KAAK,OAAO,EAAE;gBACzB,KAAI,CAAC,KAAK,GAAG,KAAK,CAAA;gBAClB,KAAI,CAAC,MAAM,GAAG,SAAS,CAAA;gBACvB,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAC,OAAkB,IAAK,OAAA,OAAO,EAAE,GAAA,CAAC,CAAA;aACvD;SACJ,EAAE,CAAC,CAAC,CAAC;KACT,CAAA;IAED,IAAM,MAAM,GAAG,UAAC,KAAU;QACtB,UAAU,CAAC;YACP,IAAI,KAAI,CAAC,MAAM,KAAK,OAAO,EAAE;gBACzB,KAAI,CAAC,KAAK,GAAG,KAAK,CAAA;gBAClB,KAAI,CAAC,MAAM,GAAG,QAAQ,CAAA;gBACtB,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAC,MAAiB,IAAK,OAAA,MAAM,EAAE,GAAA,CAAC,CAAA;aACpD;SACJ,EAAE,CAAC,CAAC,CAAC;KACT,CAAA;IAED,IAAI;QACA,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;KAC9B;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEf,MAAM,CAAC,KAAK,CAAC,CAAA;KAChB;CACJ;AAED,OAAO,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,IAAI,CAAC,WAAuC,EAAE,UAA+B;IAAtF,iBAYxB;IAXG,WAAW,GAAG,OAAO,WAAW,KAAK,UAAU,GAAG,WAAW,GAAG,UAAA,CAAC,IAAI,OAAA,CAAC,GAAA,CAAA;IACtE,UAAU,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,UAAU,GAAG,UAAA,CAAC,IAAI,OAAA,CAAC,GAAA,CAAA;IAEnE,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS;QAAE,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;IACtD,IAAI,IAAI,CAAC,MAAM,KAAK,QAAQ;QAAE,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;IACpD,IAAI,IAAI,CAAC,MAAM,KAAK,OAAO,EAAE;QACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAM,OAAA,WAAW,CAAC,KAAI,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;QACjD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAM,OAAA,UAAU,CAAC,KAAI,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;KAClD;IAED,OAAO,IAAI,CAAC;CACf,CAAA;AAED,OAAO,CAAC,SAAS,CAAC,OAAK,CAAA,GAAG,SAAS,IAAI,CAAC,UAA+B;IACnE,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAA;CACrC,CAAA;;;;"}